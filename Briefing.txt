
-Layout (Ferramenta Mockflow) 
-Cores  (Adobe Color)
-Fonte  (Google Fonts)

InspiraÃ§Ãµes:
https://confeitariaberola.com/site/content/home/
https://www.imperatrizdocesfinos.com.br/
https://padokafloripa.com.br/




/my-app
â”œâ”€â”€ /public               # arquivos estÃ¡ticos (html, css, js, img)
â”œâ”€â”€ /src
â”‚   â”œâ”€â”€ /controllers      # lÃ³gica das rotas
â”‚   â”œâ”€â”€ /routes           # definiÃ§Ã£o das rotas
â”‚   â”œâ”€â”€ /services         # lÃ³gica de negÃ³cio (opcional)
â”‚   â”œâ”€â”€ /middlewares      # autenticaÃ§Ã£o, validaÃ§Ã£o, etc
â”‚   â”œâ”€â”€ /prisma
â”‚   â”‚   â”œâ”€â”€ client.js     # cliente Prisma instanciado
â”‚   â”‚   â””â”€â”€ schema.prisma
â”‚   â””â”€â”€ /utils            # funÃ§Ãµes utilitÃ¡rias
â”œâ”€â”€ .env                  # variÃ¡veis de ambiente (ex: DB_URL)
â”œâ”€â”€ package.json
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma     # definiÃ§Ã£o dos modelos Prisma
â””â”€â”€ index.js              # arquivo principal do servidor





Ã“timo! Como vocÃª respondeu "sim", vou seguir com a **autenticaÃ§Ã£o com JWT para funcionÃ¡rios**, que Ã© uma base importante para proteger rotas como criaÃ§Ã£o de pedidos, produtos etc.

---

## ğŸ” AutenticaÃ§Ã£o com JWT para FuncionÃ¡rios

### âœ… VisÃ£o geral

* Login com CPF e senha
* GeraÃ§Ã£o de token JWT
* Middleware para proteger rotas
* CriaÃ§Ã£o de senhas com hash (**bcrypt**)

---

## 1. Instalar dependÃªncias

```bash
npm install jsonwebtoken bcryptjs
```

---

## 2. Atualizar o modelo `Funcionario` no Prisma

Abra `prisma/schema.prisma` e adicione o campo `senha`:

```prisma
model Funcionario {
  id               Int      @id @default(autoincrement())
  nome             String
  cpf              String   @unique
  telefone         String?
  email            String?
  cargo            String
  dataContratacao  DateTime
  salario          Float
  senha            String   // <- novo campo
}
```

### Atualize o banco:

```bash
npx prisma migrate dev --name add_senha_funcionario
```

---

## 3. Criar o `authController`

### `src/controllers/authController.js`

```js
const { PrismaClient } = require('@prisma/client');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');

const prisma = new PrismaClient();
const SECRET = process.env.JWT_SECRET || 'padaria_segura';

module.exports = {
  async login(req, res) {
    const { cpf, senha } = req.body;

    const funcionario = await prisma.funcionario.findUnique({ where: { cpf } });
    if (!funcionario) {
      return res.status(404).json({ error: 'FuncionÃ¡rio nÃ£o encontrado' });
    }

    const senhaValida = await bcrypt.compare(senha, funcionario.senha);
    if (!senhaValida) {
      return res.status(401).json({ error: 'Senha incorreta' });
    }

    const token = jwt.sign(
      { id: funcionario.id, nome: funcionario.nome, cargo: funcionario.cargo },
      SECRET,
      { expiresIn: '8h' }
    );

    res.json({ token });
  }
};
```

---

## 4. Rota de login

### `src/routes/authRoutes.js`

```js
const express = require('express');
const router = express.Router();
const authController = require('../controllers/authController');

router.post('/login', authController.login);

module.exports = router;
```

Adicione ao `app.js`:

```js
const authRoutes = require('./routes/authRoutes');
app.use('/auth', authRoutes);
```

---

## 5. Middleware de autenticaÃ§Ã£o

### `src/middleware/verifyToken.js`

```js
const jwt = require('jsonwebtoken');
const SECRET = process.env.JWT_SECRET || 'padaria_segura';

module.exports = (req, res, next) => {
  const authHeader = req.headers.authorization;
  if (!authHeader)
    return res.status(401).json({ error: 'Token nÃ£o fornecido' });

  const [, token] = authHeader.split(' ');

  try {
    const decoded = jwt.verify(token, SECRET);
    req.funcionario = decoded;
    next();
  } catch (err) {
    return res.status(401).json({ error: 'Token invÃ¡lido' });
  }
};
```

---

## 6. Exemplo de uso em rota protegida

```js
const verifyToken = require('../middleware/verifyToken');

// em app.js ou produtoRoutes.js
router.post('/protegido', verifyToken, (req, res) => {
  res.json({ msg: `OlÃ¡, ${req.funcionario.nome}. VocÃª estÃ¡ autenticado!` });
});
```

---

## 7. Cadastro de funcionÃ¡rios com senha (criptografada)

### Exemplo: `funcionarioController.store`

```js
const bcrypt = require('bcryptjs');

async store(req, res) {
  const { nome, cpf, telefone, email, cargo, dataContratacao, salario, senha } = req.body;

  const hash = await bcrypt.hash(senha, 8);

  const funcionario = await prisma.funcionario.create({
    data: { nome, cpf, telefone, email, cargo, dataContratacao: new Date(dataContratacao), salario, senha: hash }
  });

  res.status(201).json(funcionario);
}
```

---

## âœ… Pronto!

Agora vocÃª tem:

* Login com JWT
* Middleware para proteger rotas
* CriaÃ§Ã£o segura de funcionÃ¡rios

---

### Deseja agora:

* [ ] Criar **CRUD completo de pedidos** (com itens e total calculado)?
* [ ] Criar **CRUD de pagamentos**?
* [ ] Validar dados com Zod?
* [ ] Criar seed de exemplo para testes?

Me diga e sigo com o prÃ³ximo passo!
